# 🌟 Smart Voice & Text Assistant

Welcome to the **Smart Voice & Text Assistant**—a versatile, web-based application designed to provide seamless conversational experiences in Persian (Farsi). Powered by Flask, JavaScript, Tailwind CSS, and the Web Speech API, this assistant supports both text and voice inputs, integrates with Ollama for natural language processing, and offers a sleek user interface with features like conversation history, model selection, and theme toggling.

---

## 📑 Table of Contents

- [📖 Project Overview](#project-overview)
- [⚙️ Installation](#installation)
- [📚 Usage](#usage)
- [🔬 Algorithm Explanation](#algorithm-explanation)
- [🔢 Examples](#examples)
- [🤝 Contributing](#contributing)
- [📄 License](#license)
- [💖 Donation](#donation)

---

## 📖 Project Overview

The Smart Voice & Text Assistant aims to deliver a natural, user-friendly conversational experience in Persian. Users can interact with the assistant via text or voice, with responses generated by language models hosted through Ollama (e.g., Llama 3, Mistral, Gemma). The application features a responsive UI with a chat window, conversation history sidebar, and voice transcription panel. Conversations are stored in a SQLite database, and users can customize settings such as the language model and server URL.

**Key Features:**
- Supports Persian (Farsi) conversations with a system prompt ensuring consistent language usage.
- Voice input using the Web Speech API (browser-dependent).
- Conversation history with timestamps and model details.
- Theme toggle (light/dark mode) for better usability.
- Customizable server URL and model selection for flexibility.

---

## ⚙️ Installation

Follow these steps to set up the project on your local machine. You'll need Python 3.x, a modern web browser, and optionally Ollama for local language model inference.

### Prerequisites

1. **Python 3.x**: Ensure Python is installed. Check your version by running:
   ```bash
   python --version
   ```
   If Python is not installed, download it from [python.org](https://www.python.org/downloads/).

2. **Git**: Required to clone the repository. Install Git from [git-scm.com](https://git-scm.com/downloads).

3. **Web Browser**: A modern browser (e.g., Chrome, Firefox) that supports the Web Speech API for voice recognition.

### Install Dependencies

Install the required Python libraries using `pip`:

```bash
pip install flask flask-cors requests
```

### Install Ollama (Optional for Local Model Inference)

Ollama allows you to run language models locally. Follow the instructions for your operating system to set it up.

#### **Windows**
1. Download the Ollama installer from [Ollama's official website](https://ollama.ai/download).
2. Run the installer and follow the on-screen instructions to complete the installation.
3. Open a terminal (e.g., Command Prompt or PowerShell) and pull a model (e.g., Llama 3):
   ```bash
   ollama pull llama3
   ```
4. Start the Ollama server with the selected model:
   ```bash
   ollama run llama3
   ```

#### **Linux**
1. Install Ollama using the provided installation script:
   ```bash
   curl https://ollama.ai/install.sh | sh
   ```
2. Pull a model (e.g., Llama 3):
   ```bash
   ollama pull llama3
   ```
3. Start the Ollama server:
   ```bash
   ollama run llama3
   ```

For more detailed instructions, refer to the [Ollama documentation](https://ollama.ai/docs).

### Clone the Repository

Clone the project repository using Git:

```bash
git clone https://github.com/your-username/smart-assistant.git
cd smart-assistant
```

---

## 📚 Usage

The Smart Voice & Text Assistant runs as a web application. Follow these steps to launch it:

1. Start the Flask server by running:
   ```bash
   python app.py
   ```
   The server will start on `http://localhost:5000`.

2. Open a web browser and navigate to `http://localhost:5000` to access the interface.

### Interface Overview
- **Chat Window**: Displays user and assistant messages with a clean, responsive design.
- **Voice Input Panel**: Allows voice recording and transcription (visible when voice mode is active).
- **Sidebar**: Shows conversation history with titles, timestamps, and model information.
- **Input Area**: Supports both text and voice input, with a toggle button to switch modes.
- **Settings**: Includes model selection (e.g., Llama 3, Mistral, Gemma) and server URL customization.

### Example Interaction
- Type a message like "سلام، امروز هوا چطور است؟" or use the voice input to ask a question.
- The assistant responds in Persian, and the conversation is saved in the history.

---

## 🔬 Algorithm Explanation

The Smart Voice & Text Assistant operates through a combination of frontend and backend components:

### **Frontend**
- **Technologies**: HTML, Tailwind CSS, JavaScript.
- **Voice Recognition**: Utilizes the Web Speech API (`SpeechRecognition`) for real-time voice-to-text transcription in Persian (`lang='fa-IR'`).
- **UI Management**: Dynamically updates the chat window, sidebar, and voice panel using JavaScript. Messages are animated with a fade-in effect, and a typing indicator is shown during response generation.

### **Backend**
- **Framework**: Flask with CORS support for cross-origin requests.
- **Database**: SQLite stores conversation metadata (e.g., conversation ID, title, model, timestamp) and messages (e.g., sender, content, timestamp).
- **API Endpoints**:
  - `/api/chat`: Handles user messages, constructs prompts, and communicates with Ollama.
  - `/api/conversations`: Retrieves conversation history.
  - `/api/conversation`: Manages individual conversations (create, read, delete).

### **Processing Flow**
1. **User Input**: The user sends a message via text or voice. Voice input is transcribed using the Web Speech API.
2. **Prompt Construction**: The backend retrieves the last 5 messages from the conversation history, adds a system prompt ("Respond in Persian"), and appends the user’s message.
3. **Model Inference**: The prompt is sent to Ollama, which generates a response using the selected model.
4. **Response Handling**: The response is saved in the database and displayed in the chat window.

---

## 🔢 Examples

Here are some example interactions demonstrating the assistant's capabilities:

1. **Greeting in Persian**
   - **Input (Text)**: "سلام، خوبی؟"
   - **Output**: "سلام! خیلی خوبم، ممنون. تو چطور؟"

2. **Voice Command for Poetry**
   - **Input (Voice)**: "یک شعر کوتاه بگو"
   - **Output**: "البته!  
     در آسمان دل، ستاره می‌درخشد،  
     عشق در قلب، همیشه می‌پیچد."

3. **Mathematical Query**
   - **Input (Text)**: "Calculate 5 + 3"
   - **Output**: "نتیجه محاسبه: ۸"

4. **Date Inquiry**
   - **Input (Voice)**: "تاریخ امروز چیست؟"
   - **Output**: "امروز ۲۰ آوریل ۲۰۲۵ است."

5. **Language Switch**
   - **Input (Text)**: "Switch to English and say hello"
   - **Output**: "Hello!"

Each interaction is logged in the conversation history, which can be accessed and managed via the sidebar.

---

## 🤝 Contributing

We welcome contributions to enhance the Smart Voice & Text Assistant! If you have ideas for new features, bug fixes, or improvements, please follow these steps:
1. Fork the repository.
2. Create a new branch for your changes (`git checkout -b feature/your-feature`).
3. Commit your changes (`git commit -m "Add your feature"`).
4. Push to your branch (`git push origin feature/your-feature`).
5. Open a pull request with a detailed description of your changes.

Please ensure your code adheres to the project's coding style and includes relevant tests.

---

## 📄 License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

---

## 💖 Donation

If you found this project helpful, consider supporting it with a donation:

<a href="https://nowpayments.io/donation?api_key=REWCYVC-A1AMFK3-QNRS663-PKJSBD2&source=lk_donation&medium=referral" target="_blank">
     <img src="https://nowpayments.io/images/embeds/donation-button-black.svg" alt="Crypto donation button by NOWPayments">
</a>

---

Thank you for using the Smart Voice & Text Assistant! 🚀
